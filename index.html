<!DOCTYPE html>
<html>
<head>
    <title>Waffle House Current Fiscal Period</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Modern, clean style for a standalone widget */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            text-align: center; 
            margin: 0; 
            padding: 0; 
            height: 100vh;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background-color: #f4f4f4; /* Light gray background */
        }
        #output { 
            font-size: 1.4em; /* Slightly larger font */
            font-weight: 700; 
            padding: 15px 25px; 
            border: 2px solid #e0b400; /* Yellow border for emphasis */
            border-radius: 10px; 
            display: inline-block; 
            background-color: #ffffff; 
            color: #333; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            white-space: nowrap; 
            transition: all 0.3s ease;
        }
        #output.loading {
            color: #888;
            border-color: #ccc;
        }
        #output.error {
            color: #d83b01;
            border-color: #d83b01;
        }
    </style>
</head>
<body>
    <div id="output" class="loading">Loading...</div>

    <script>
        (function() {
            // *** Fiscal Period Data (The JSON is embedded here) ***
            const opData = [{"FY":26,"OP":1,"Start":"2025-06-02","End":"2025-06-30"},{"FY":26,"OP":2,"Start":"2025-06-30","End":"2025-07-28"},{"FY":26,"OP":3,"Start":"2025-07-28","End":"2025-08-25"},{"FY":26,"OP":4,"Start":"2025-08-25","End":"2025-09-22"},{"FY":26,"OP":5,"Start":"2025-09-22","End":"2025-10-20"},{"FY":26,"OP":6,"Start":"2025-10-20","End":"2025-11-17"},{"FY":26,"OP":7,"Start":"2025-11-17","End":"2025-12-15"},{"FY":26,"OP":8,"Start":"2025-12-15","End":"2026-01-12"},{"FY":26,"OP":9,"Start":"2026-01-12","End":"2026-02-09"},{"FY":26,"OP":10,"Start":"2026-02-09","End":"2026-03-09"},{"FY":26,"OP":11,"Start":"2026-03-09","End":"2026-04-06"},{"FY":26,"OP":12,"Start":"2026-04-06","End":"2026-05-04"},{"FY":26,"OP":13,"Start":"2026-05-04","End":"2026-06-01"},{"FY":27,"OP":1,"Start":"2026-06-01","End":"2026-06-29"},{"FY":27,"OP":2,"Start":"2026-06-29","End":"2026-07-27"},{"FY":27,"OP":3,"Start":"2026-07-27","End":"2026-08-24"},{"FY":27,"OP":4,"Start":"2026-08-24","End":"2026-09-21"},{"FY":27,"OP":5,"Start":"2026-09-21","End":"2026-10-19"},{"FY":27,"OP":6,"Start":"2026-10-19","End":"2026-11-16"},{"FY":27,"OP":7,"Start":"2026-11-16","End":"2026-12-14"},{"FY":27,"OP":8,"Start":"2026-12-14","End":"2027-01-11"},{"FY":27,"OP":9,"Start":"2027-01-11","End":"2027-02-08"},{"FY":27,"OP":10,"Start":"2027-02-08","End":"2027-03-08"},{"FY":27,"OP":11,"Start":"2027-03-08","End":"2027-04-05"},{"FY":27,"OP":12,"Start":"2027-04-05","End":"2027-05-03"},{"FY":27,"OP":13,"Start":"2027-05-03","End":"2027-05-31"},{"FY":28,"OP":1,"Start":"2027-05-31","End":"2027-06-28"},{"FY":28,"OP":2,"Start":"2027-06-28","End":"2027-07-26"},{"FY":28,"OP":3,"Start":"2027-07-26","End":"2027-08-23"},{"FY":28,"OP":4,"Start":"2027-08-23","End":"2027-09-20"},{"FY":28,"OP":5,"Start":"2027-09-20","End":"2027-10-18"},{"FY":28,"OP":6,"Start":"2027-10-18","End":"2027-11-15"},{"FY":28,"OP":7,"Start":"2027-11-15","End":"2027-12-13"},{"FY":28,"OP":8,"Start":"2027-12-13","End":"2028-01-10"},{"FY":28,"OP":9,"Start":"2028-01-10","End":"2028-02-07"},{"FY":28,"OP":10,"Start":"2028-02-07","End":"2028-03-06"},{"FY":28,"OP":11,"Start":"2028-03-06","End":"2028-04-03"},{"FY":28,"OP":12,"Start":"2028-04-03","End":"2028-05-01"},{"FY":28,"OP":13,"Start":"2028-05-01","End":"2028-05-29"},{"FY":29,"OP":1,"Start":"2028-05-29","End":"2028-06-26"},{"FY":29,"OP":2,"Start":"2028-06-26","End":"2028-07-24"},{"FY":29,"OP":3,"Start":"2028-07-24","End":"2028-08-21"},{"FY":29,"OP":4,"Start":"2028-08-21","End":"2028-09-18"},{"FY":29,"OP":5,"Start":"2028-09-18","End":"2028-10-16"},{"FY":29,"OP":6,"Start":"2028-10-16","End":"2028-11-13"},{"FY":29,"OP":7,"Start":"2028-11-13","End":"2028-12-11"},{"FY":29,"OP":8,"Start":"2028-12-11","End":"2029-01-08"},{"FY":29,"OP":9,"Start":"2029-01-08","End":"2029-02-05"},{"FY":29,"OP":10,"Start":"2029-02-05","End":"2029-03-05"},{"FY":29,"OP":11,"Start":"2029-03-05","End":"2029-04-02"},{"FY":29,"OP":12,"Start":"2029-04-02","End":"2029-04-30"},{"FY":29,"OP":13,"Start":"2029-04-30","End":"2029-05-28"},{"FY":30,"OP":1,"Start":"2029-05-28","End":"2029-06-25"},{"FY":30,"OP":2,"Start":"2029-06-25","End":"2029-07-23"},{"FY":30,"OP":3,"Start":"2029-07-23","End":"2029-08-20"},{"FY":30,"OP":4,"Start":"2029-08-20","End":"2029-09-17"},{"FY":30,"OP":5,"Start":"2029-09-17","End":"2029-10-15"},{"FY":30,"OP":6,"Start":"2029-10-15","End":"2029-11-12"},{"FY":30,"OP":7,"Start":"2029-11-12","End":"2029-12-10"},{"FY":30,"OP":8,"Start":"2029-12-10","End":"2030-01-07"},{"FY":30,"OP":9,"Start":"2030-01-07","End":"2030-02-04"},{"FY":30,"OP":10,"Start":"2030-02-04","End":"2030-03-04"},{"FY":30,"OP":11,"Start":"2030-03-04","End":"2030-04-01"},{"FY":30,"OP":12,"Start":"2030-04-01","End":"2030-04-29"},{"FY":30,"OP":13,"Start":"2030-04-29","End":"2030-06-03"}];

            const outputElement = document.getElementById('output');
            
            function getFiscalInfo() {
                const today = new Date();
                today.setHours(0, 0, 0, 0); 
                
                let currentFYOP = null;

                // 1. Find the current Operating Period (OP)
                for (const op of opData) {
                    const startDate = new Date(op.Start + 'T00:00:00');
                    const endDate = new Date(op.End + 'T00:00:00');
                    endDate.setHours(23, 59, 59, 999); 

                    if (today >= startDate && today <= endDate) {
                        currentFYOP = op;
                        break;
                    }
                }

                outputElement.classList.remove('loading');
                
                if (currentFYOP) {
                    // 2. Calculate the Week within the OP
                    const startDate = new Date(currentFYOP.Start + 'T00:00:00');
                    const diffTime = today.getTime() - startDate.getTime();
                    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)); 
                    const weekNumber = Math.floor(diffDays / 7) + 1;
                    const weekDisplay = Math.min(Math.max(1, weekNumber), 4);
                    
                    // 3. Display the result
                    outputElement.textContent = `Current week: Week ${weekDisplay}, FY${currentFYOP.FY} OP${currentFYOP.OP}`;

                } else {
                    outputElement.textContent = "Current period data not found.";
                    outputElement.classList.add('error');
                }
            }

            getFiscalInfo();
        })();
    </script>
</body>
</html>
